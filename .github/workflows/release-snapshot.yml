name: Run JS Test Cases
on:	
  push:	
    branches:	
      - master	 
jobs:	
  publish-npmjs:	
    runs-on: ubuntu-20.04	
    steps:	
      - uses: actions/checkout@v3	
      - uses: actions/setup-node@v3	
        with:	
         node-version: '14.8.x'	
         registry-url: 'https://registry.npmjs.org'	
      - uses: actions/setup-java@v3	
        with:	
          java-version: '11'	
          distribution: 'adopt'	
      - name: Build AMS from source
      - run: npm install
      - run: npm run compile
      - run: sed -i 's/^AMS_DIR=.*/AMS_DIR=\/usr\/local\/antmedia/' redeploy.sh
      - run: sudo ./redeploy.sh
